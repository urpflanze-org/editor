(self.webpackChunk_genbs_urpflanze_gui=self.webpackChunk_genbs_urpflanze_gui||[]).push([[300],{18300:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>w});var n=t(67294),r=t(51512),p=t(62138),l=t(86908),o=t(79340);const i=n.memo((e=>{var a,t;const r={bMatrixRepetitions:!!(null===(a=e.layer)||void 0===a?void 0:a.props.repetitions)&&Array.isArray(null===(t=e.layer)||void 0===t?void 0:t.props.repetitions),bVector:!!e.prop_name&&"multiple-range"===o.Z[e.prop_name].type,bColor:!!e.prop_name&&"color"===o.Z[e.prop_name].type};return n.createElement("div",{style:{width:"100%",height:"100%"}},e.layer&&e.prop_name?n.createElement(l.Z,{options:r,initialReteState:e.initialReteState,setReteAnimation:e.setReteAnimation}):n.createElement("div",{style:{display:"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"center"}},n.createElement("div",null,"Select layer and prop")))}));var s=t(99011),m=t(76383),y=t(12739),u=t(27722),c=t(63402),d=t(78460),_=t(75923);const v={position:"absolute",top:0,left:0,padding:m.Z.ms(1)},w=(0,r.$j)((e=>({scene:e.project.scene})))((e=>{var a;const[t,r]=n.useState(null),[l,o]=n.useState(null),[m,w]=n.useState(null),[f,h]=(0,c.Z)("animate",e.scene,e.layer_id,e.prop_name);function E(){if(f.layer&&f.prop_name){const e={raw:`(${y.Z.RAW_ARGUMENTS}) => ${null==t?void 0:t.raw}`,state:null==t?void 0:t.state},a=(0,d.Ky)(f.layer,e.raw);if(a.valid){const a={id:f.layer.id,name:f.prop_name,value:{type:"raw",value:e},prev_value:f.layer.props[f.prop_name]};window.opener.postMessage({event:"set-popup-window-value",value:a},location.origin)}else(0,_.Z)(`Code error:\n ${a.error}`)}}return n.useEffect((()=>{function e(e){83===e.keyCode&&(0,u.sn)(e)&&(e.preventDefault(),E())}return window.addEventListener("keydown",e,{passive:!1}),()=>window.removeEventListener("keydown",e)}),[null===(a=f.layer)||void 0===a?void 0:a.id,f.layer&&f.prop_name?f.layer.props[f.prop_name]:null,f.prop_name,t]),n.useEffect((()=>{if(f.layer&&f.prop_name&&f.layer.id&&(f.layer.id+"").length>0){const e=f.layer&&f.prop_name&&y.Z.bValueAnimation(f.layer.props[f.prop_name])&&"raw"===f.layer.props[f.prop_name].type?f.layer.props[f.prop_name].value.state:null;w(e)}}),[f.prop_name,f.layer,f.layer.props,f.prop_name?f.layer.props[f.prop_name]:null]),n.createElement("div",{style:{width:"100vw",height:"100vh"}},n.createElement("div",{style:{position:"relative",width:"100%",height:"100%"}},n.createElement("div",{style:v},n.createElement(s.Z,{name:"save",onClick:E,size:2}),n.createElement(s.Z,{name:"copy",size:2,onClick:function(){f.prop_name&&o({prop_name:f.prop_name,value:(null==t?void 0:t.state)||null})}}),n.createElement(s.Z,{name:"paste",disabled:null===l,size:2,onClick:function(){l&&w(l.value)}})),n.createElement(i,{layer:f.layer,prop_name:f.prop_name,initialReteState:m,setReteAnimation:r})),n.createElement(p.Z,{scene:e.scene,layer:f.layer,prop_name:f.prop_name,selectLayer:e=>{h({prop_name:f.prop_name,prop_type:f.prop_type,layer:e})},selectPropName:e=>{h({layer:f.layer,prop_name:e,prop_type:(0,c.X)(e)})}}))}))}}]);